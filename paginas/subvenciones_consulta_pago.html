<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consulta de Pago</title>
    <link href="../recursos/css/bootstrap.min.css" rel="stylesheet">
    <link href="../recursos/css/style.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            padding: 20px;
            overflow-y: auto;
        }

        .search-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            padding: 30px;
            margin-bottom: 20px;
            max-width: 600px;
        }

        .search-header {
            font-weight: 600;
            color: #343a40;
            margin-bottom: 20px;
            font-size: 1rem;
        }

        .form-label {
            font-weight: 500;
            font-size: 0.875rem;
            color: #495057;
            margin-bottom: 5px;
        }
    </style>
</head>

<body>

    <div class="container-fluid">
        <h2 class="mb-1">Consulta de Pago</h2>
        <p class="text-muted mb-4">Buscar, crear o modificar registros de pagos</p>

        <!-- Búsqueda Simple -->
        <div class="search-card">
            <div class="search-header">Buscar Pago</div>

            <div class="mb-3">
                <label class="form-label">Número de Subvención</label>
                <input type="text" class="form-control" id="numero_subvencion" placeholder="Ej: 1">
            </div>

            <div class="d-flex gap-2">
                <button class="btn btn-dark" onclick="buscarPago()">
                    <i data-feather="search"></i> Buscar
                </button>
                <button class="btn btn-outline-secondary" onclick="nuevoPago()">
                    <i data-feather="plus"></i> Nuevo Pago
                </button>
            </div>
        </div>

        <!-- Datos del Pago (oculto inicialmente) -->
        <div class="search-card" id="datos_pago" style="display: none; max-width: 800px;">
            <div class="search-header">Datos del Pago</div>

            <div class="row g-3">
                <div class="col-md-6">
                    <label class="form-label">Número Subvención</label>
                    <input type="text" class="form-control" id="pago_numero" value="1" readonly>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Fecha Evento</label>
                    <input type="date" class="form-control" id="pago_fecha_evento" value="2024-09-15" readonly>
                </div>

                <div class="col-md-6">
                    <label class="form-label">Estado Evento</label>
                    <input type="text" class="form-control" id="pago_estado" value="TERMINADA" readonly>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Fecha Digitalización</label>
                    <input type="date" class="form-control" id="pago_fecha_digitalizacion" value="2024-09-20" readonly>
                </div>

                <div class="col-12">
                    <label class="form-label">Responsable Evento</label>
                    <input type="text" class="form-control" id="pago_responsable" value="María González López" readonly>
                </div>

                <div class="col-12">
                    <label class="form-label">Glosa Evento</label>
                    <input type="text" class="form-control" id="pago_glosa"
                        value="Pago primera cuota subvención municipal" readonly>
                </div>

                <div class="col-12">
                    <label class="form-label">Observaciones</label>
                    <textarea class="form-control" id="pago_observaciones" rows="2"
                        readonly>Pago procesado correctamente según resolución N° 123/2024</textarea>
                </div>
            </div>

            <!-- Botones de acción -->
            <div class="d-flex gap-2 mt-4">
                <button class="btn btn-dark" onclick="guardarCambios()">
                    <i data-feather="save"></i> Guardar Cambios
                </button>
                <button class="btn btn-outline-secondary" onclick="imprimirPDF()">
                    <i data-feather="file-text"></i> Imprimir PDF
                </button>
                <button class="btn btn-outline-danger" onclick="cancelar()">
                    <i data-feather="x"></i> Cancelar
                </button>
            </div>
        </div>

    </div>

    <script src="../recursos/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script>
        feather.replace();
    </script>
    <script>
        function buscarPago() {
            const numero = document.getElementById('numero_subvencion').value.trim();
            if (!numero) {
                alert('Por favor ingrese un número de subvención.');
                return;
            }

            // Simular búsqueda exitosa
            console.log('Buscando pago para subvención:', numero);

            // Mostrar datos del pago
            document.getElementById('datos_pago').style.display = 'block';

            // En producción, aquí se cargarían los datos reales desde la API
            if (numero === '1') {
                document.getElementById('pago_numero').value = '1';
                document.getElementById('pago_fecha_evento').value = '2024-09-15';
                document.getElementById('pago_estado').value = 'TERMINADA';
                document.getElementById('pago_fecha_digitalizacion').value = '2024-09-20';
                document.getElementById('pago_responsable').value = 'María González López';
                document.getElementById('pago_glosa').value = 'Pago primera cuota subvención municipal';
                document.getElementById('pago_observaciones').value = 'Pago procesado correctamente según resolución N° 123/2024';
            }
        }

        function nuevoPago() {
            console.log('Creando nuevo pago');
            document.getElementById('datos_pago').style.display = 'block';

            // Limpiar campos para nuevo pago
            document.getElementById('pago_numero').value = '';
            document.getElementById('pago_fecha_evento').value = '';
            document.getElementById('pago_estado').value = '';
            document.getElementById('pago_fecha_digitalizacion').value = '';
            document.getElementById('pago_responsable').value = '';
            document.getElementById('pago_glosa').value = '';
            document.getElementById('pago_observaciones').value = '';

            // Hacer campos editables
            document.querySelectorAll('#datos_pago input, #datos_pago textarea').forEach(el => {
                el.removeAttribute('readonly');
            });
        }

        function guardarCambios() {
            console.log('Guardando cambios del pago');
            alert('Cambios guardados exitosamente.');
        }

        function imprimirPDF() {
            console.log('Imprimiendo PDF del pago');
            alert('Generando PDF del pago...');
        }

        function cancelar() {
            document.getElementById('datos_pago').style.display = 'none';
            document.getElementById('numero_subvencion').value = '';
        }
    </script>
<script src='../recursos/js/layout_manager.js'></script>
</body>

</html>
